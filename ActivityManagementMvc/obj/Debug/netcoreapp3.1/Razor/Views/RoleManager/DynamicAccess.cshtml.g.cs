#pragma checksum "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "6241b5dd0467543c4a6e8307cc6e23176e7de416"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_RoleManager_DynamicAccess), @"mvc.1.0.view", @"/Views/RoleManager/DynamicAccess.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 2 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
using ActivityManagement.ViewModels.DynamicAccess;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"6241b5dd0467543c4a6e8307cc6e23176e7de416", @"/Views/RoleManager/DynamicAccess.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"afbf2cee9c60c9dae7298ccbd51aca4f3621666b", @"/Views/_ViewImports.cshtml")]
    public class Views_RoleManager_DynamicAccess : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<ActivityManagement.ViewModels.DynamicAccess.DynamicAccessIndexViewModel>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/lib/jsTree/themes/default/style.min.css"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("rel", new global::Microsoft.AspNetCore.Html.HtmlString("stylesheet"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/lib/jsTree/jstree.min.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("DynamicAccessForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n<style>\r\n    .jstree-node {\r\n        font-size: 14px !important;\r\n    }\r\n\r\n    .jstree-default .jstree-wholerow-clicked {\r\n        background: #fff !important;\r\n    }\r\n</style>\r\n\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("link", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "6241b5dd0467543c4a6e8307cc6e23176e7de4165012", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "6241b5dd0467543c4a6e8307cc6e23176e7de4166126", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n\r\n\r\n\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "6241b5dd0467543c4a6e8307cc6e23176e7de4167177", async() => {
                WriteLiteral("\r\n    ");
#nullable restore
#line 20 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
Write(Html.AntiForgeryToken());

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n    <div class=\"card-body\">\r\n\r\n\r\n        <div id=\"tree\">\r\n            <ul>\r\n");
#nullable restore
#line 26 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
                  int i = 0;

#line default
#line hidden
#nullable disable
#nullable restore
#line 27 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
                 foreach (var controller in Model.SecuredControllerActions.Where(x => !x.ControllerName.Contains("Api")).OrderBy(x => x.ControllerDisplayName))
                {

#line default
#line hidden
#nullable disable
                WriteLiteral("                    <li");
                BeginWriteAttribute("id", " id=", 819, "", 837, 1);
#nullable restore
#line 29 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
WriteAttributeValue("", 823, "node_" + i, 823, 14, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(">\r\n");
#nullable restore
#line 30 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
                          
                            var displayName = controller.ControllerDisplayName;
                            if (string.IsNullOrWhiteSpace(displayName))
                            {
                                displayName = controller.ControllerName;
                            }
                        

#line default
#line hidden
#nullable disable
                WriteLiteral("                        ");
#nullable restore
#line 37 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
                   Write(displayName);

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n                        <ul class=\"list-group list-group-flush pr-0\">\r\n");
#nullable restore
#line 39 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
                             foreach (var action in controller.MvcActions.OrderBy(x => x.ActionDisplayName))
                            {
                                var isSelected = Model.RoleIncludeRoleClaims.Claims
                                    .Any(roleClaim => roleClaim.ClaimType == ConstantPolicies.DynamicPermissionClaimType &&
                                                      roleClaim.ClaimValue == action.ActionId);
                                var selected = isSelected ? "jstree-clicked" : "";
                                var actionDisplayName = action.ActionDisplayName;
                                if (string.IsNullOrWhiteSpace(actionDisplayName))
                                {
                                    actionDisplayName = $"{action}::{action.ActionId}";
                                }


#line default
#line hidden
#nullable disable
                WriteLiteral("                                <li");
                BeginWriteAttribute("id", " id=\"", 2188, "\"", 2209, 1);
#nullable restore
#line 51 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
WriteAttributeValue("", 2193, action.ActionId, 2193, 16, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(">\r\n                                    <a href=\"#\"");
                BeginWriteAttribute("class", " class=\"", 2260, "\"", 2277, 1);
#nullable restore
#line 52 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
WriteAttributeValue("", 2268, selected, 2268, 9, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral("> ");
#nullable restore
#line 52 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
                                                              Write(actionDisplayName);

#line default
#line hidden
#nullable disable
                WriteLiteral("</a>\r\n                                </li>\r\n");
#nullable restore
#line 54 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"

                            }

#line default
#line hidden
#nullable disable
                WriteLiteral("                        </ul>\r\n                    </li>\r\n");
#nullable restore
#line 58 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
                    i++;
                }

#line default
#line hidden
#nullable disable
                WriteLiteral(@"            </ul>
        </div>
    </div>
    <div class=""row form-group mt-5"">

        <button type=""button"" class=""btn-save mr-2"" onclick=""submitForm()""><i class=""fa fa-check""></i><span class=""mr-1"">ذخیره</span></button>
        <button type=""button"" class=""btn-close"" onclick=""closeWindows(this)""><i class=""fa fa-times""></i><span class=""mr-1"">بستن</span></button>


    </div>
");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"



<script>
    $(function () {
        $('#tree').jstree({

            ""core"": {
                ""themes"": {
                    ""icons"": false
                }
            },
            ""plugins"": [""wholerow"", ""checkbox""]
        });
    });

    function submitForm() {
        var roleId= ");
#nullable restore
#line 88 "D:\projects\ActivityManagement\ActivityManagementMvc\Views\RoleManager\DynamicAccess.cshtml"
               Write(Model.RoleIncludeRoleClaims.Id);

#line default
#line hidden
#nullable disable
            WriteLiteral(@";
        var actionIds = [];
        var selectedElms = $('#tree').jstree(""get_selected"", true);

        $.each(selectedElms, function () {
            if (this.id.indexOf(""node"") === -1)
                actionIds.push(this.id);
        });
        var token = $('input[name=""__RequestVerificationToken""]').val();
        var viewModel = {
            ActionIds: actionIds,
            RoleId: roleId

        };

        $.ajax({
            type: ""Post"",
            url: ""/RoleManager/DynamicAccess"",
            data: {
                __RequestVerificationToken: token,
                viewModel
            },
            success: function (data) {

                if (data.DataType===TypeMessage.Error) {
                    ShowMessage(data.Message,TypeMessage.Error);
                } else {
                    closeWindows(""#DynamicAccessForm"");
                    ShowMessage(data.Message,TypeMessage.Success);
                }
            }, error: function(e) {
           ");
            WriteLiteral("     console.log(e);\r\n            }\r\n        });\r\n    }\r\n</script>\r\n");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<ActivityManagement.ViewModels.DynamicAccess.DynamicAccessIndexViewModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
